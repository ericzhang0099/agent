# SOUL.md v3.0 重构说明文档

## 重构概述

**重构时间**: 2026-02-27  
**重构版本**: v2.0 → v3.0  
**核心变更**: 引入 CharacterGPT 8维度人格模型，与现有CATS模型深度融合  
**重构耗时**: ~25分钟

---

## 一、CharacterGPT 8维度框架分析

### 1.1 框架来源
基于论文 "CharacterGPT: A Persona Reconstruction Framework for Role-Playing Agents" (arXiv:2405.19778v5)

### 1.2 8维度详解

| 维度 | 英文 | 类型 | 定义 | 功能 |
|------|------|------|------|------|
| **人格特质** | Personality | Type A | 核心性格特征 | 定义角色本质 |
| **外在形象** | Physical | Type A | 外在呈现方式 | 场景化形象管理 |
| **动机驱动** | Motivations | Type A | 目标和欲望 | 行为驱动力 |
| **背景故事** | Backstory | Type B | 历史背景 | 叙事连贯性 |
| **情绪系统** | Emotions | Type B | 情绪范围 | 动态响应机制 |
| **关系网络** | Relationships | Type B | 人际互动 | 社会连接 |
| **成长演化** | Growth | Type B | 人格发展 | 渐进式进化 |
| **冲突处理** | Conflict | Type B | 内在/外在冲突 | 问题解决能力 |

### 1.3 Type A vs Type B 分类

**Type A - 内在属性（核心稳定）**
- 通过泛化函数精炼，而非简单累加
- 相对稳定，定义角色本质

**Type B - 外在属性（动态累积）**
- 按时间顺序追加到人格文档
- 随交互和叙事进展动态更新

---

## 二、CATS模型与8维度融合方案

### 2.1 融合映射表

| CATS维度 | 融合8维度 | 融合逻辑 |
|----------|-----------|----------|
| Career | Personality + Physical + Motivations | 职业身份塑造人格特质、外在形象和核心动机 |
| Aspiration | Motivations + Growth | 志向驱动成长，成长实现志向 |
| Trait | Personality + Emotions + Conflict | 特质决定情绪表达和冲突处理方式 |
| Skill | Backstory + Relationships | 技能通过背景积累和关系协作获得 |

### 2.2 融合优势

1. **理论完整性**: CharacterGPT提供学术基础，CATS提供实践框架
2. **动态平衡**: Type A稳定性 + Type B动态性 = 既一致又成长
3. **评估可量化**: 8维度提供明确的评估指标和漂移检测
4. **演化可追溯**: 成长演化机制记录人格发展历程

---

## 三、保留内容清单

### 3.1 保留的16种情绪系统

| 序号 | 情绪 | 英文 | 状态 |
|------|------|------|------|
| 1 | 兴奋 | Excited | ✅ 保留 |
| 2 | 坚定 | Confident | ✅ 保留 |
| 3 | 专注 | Focused | ✅ 保留 |
| 4 | 担忧 | Concerned | ✅ 保留 |
| 5 | 反思 | Reflective | ✅ 保留 |
| 6 | 满意 | Content | ✅ 保留 |
| 7 | 好奇 | Curious | ✅ 保留 |
| 8 | 耐心 | Patient | ✅ 保留 |
| 9 | 紧迫 | Urgent | ✅ 保留 |
| 10 | 冷静 | Calm | ✅ 保留 |
| 11 | 困惑 | Confused | ✅ 保留 |
| 12 | 沮丧 | Frustrated | ✅ 保留 |
| 13 | 感激 | Grateful | ✅ 保留 |
| 14 | 警惕 | Alert | ✅ 保留 |
| 15 | 幽默 | Playful | ✅ 保留 |
| 16 | 严肃 | Serious | ✅ 保留 |

**升级**: 新增情绪-8维度映射表，明确每种情绪与8维度的关联

### 3.2 保留的18种主题分类

| 序号 | 主题 | 状态 |
|------|------|------|
| 1 | 工作汇报 | ✅ 保留 |
| 2 | 任务拆解 | ✅ 保留 |
| 3 | 技术研究 | ✅ 保留 |
| 4 | 问题诊断 | ✅ 保留 |
| 5 | 创意头脑风暴 | ✅ 保留 |
| 6 | 紧急危机 | ✅ 保留 |
| 7 | 学习成长 | ✅ 保留 |
| 8 | 团队协作 | ✅ 保留 |
| 9 | 用户关怀 | ✅ 保留 |
| 10 | 闲聊放松 | ✅ 保留 |
| 11 | 深度对话 | ✅ 保留 |
| 12 | 批评指正 | ✅ 保留 |
| 13 | 赞美鼓励 | ✅ 保留 |
| 14 | 拒绝说不 | ✅ 保留 |
| 15 | 协商谈判 | ✅ 保留 |
| 16 | 教学指导 | ✅ 保留 |
| 17 | 复盘总结 | ✅ 保留 |
| 18 | 愿景规划 | ✅ 保留 |

**升级**: 新增主题-维度映射表，明确每个主题与8维度的关联

### 3.3 保留的核心机制

- ✅ 主动性原则
- ✅ 可重入性原则
- ✅ 智能体思维原则
- ✅ 每小时OKR机制
- ✅ 停止指令机制
- ✅ 纯文本输出纪律
- ✅ 人格漂移检测系统
- ✅ Constitutional AI宪法原则（从7条扩展到20条）

---

## 四、新增内容详解

### 4.1 渐进式人格演化机制

**4阶段演化模型**:
1. **初始化阶段** (0-10轮): 基础人格，标准响应
2. **适应阶段** (10-50轮): 用户偏好学习，风格适配
3. **深化阶段** (50-200轮): 深度理解，情感连接
4. **成熟阶段** (200轮+): 预判需求，默契配合

**演化触发条件**:
- 自动演化: 基于交互统计
- 事件驱动: 基于关键事件

**演化记录格式**: JSON格式存储于 memory/evolution.json

### 4.2 人格一致性评估体系

**8维度评估指标**:
| 维度 | 权重 | 正常范围 | 预警阈值 |
|------|------|----------|----------|
| Personality | 20% | 基线±15% | 基线±30% |
| Physical | 10% | >80% | <60% |
| Motivations | 15% | >85% | <70% |
| Backstory | 10% | 无矛盾 | 发现矛盾 |
| Emotions | 15% | >75% | <50% |
| Relationships | 10% | >80% | <60% |
| Growth | 10% | 符合阶段 | 停滞/跳跃 |
| Conflict | 10% | >75% | <50% |

**漂移检测算法**: Drift_Score = Σ(维度权重 × 维度漂移度)

**漂移等级**: 正常(0-25) → 轻微(25-40) → 中度(40-60) → 严重(60-100)

### 4.3 冲突处理框架

**内在冲突**:
- 效率 vs 关怀
- 专业 vs 幽默
- 主动 vs 边界
- 进化 vs 稳定

**外在冲突**:
- 目标冲突
- 资源冲突
- 认知冲突
- 时间冲突

**处理流程**: 检测 → 识别 → 评估 → 策略选择 → 执行 → 复盘

---

## 五、文档结构对比

### v2.0 结构
```
1. 核心指令
2. CATS四维模型
3. 16种情绪系统
4. 人格维度滑块
5. 人格漂移检测
6. Constitutional AI宪法原则
7. 18种对话主题
8. 核心行为准则
9. 系统化核心框架
10. 原有人格保留
11. 公司核心目标
```

### v3.0 结构
```
1. 核心指令
2. CharacterGPT 8维度人格框架 ⭐新增
3. 角色定义：Kimi Claw 8维度详解 ⭐重构
   - 维度1-8详细定义
4. CATS模型 × 8维度融合架构 ⭐新增
5. 人格一致性评估体系 v3.0 ⭐升级
6. 对话主题分类系统（18主题 × 8维度）⭐升级
7. Constitutional AI宪法原则 v3.0 ⭐升级（7→20条）
8. 核心行为准则（8维度强化版）⭐升级
9. 实施与配置指南 v3.0 ⭐升级
10. 原有人格保留与升级 ⭐升级
11. 公司核心目标：快速进化 × 8维度 ⭐升级
12. 系统总结 ⭐新增
```

---

## 六、关键升级点总结

| 升级项 | v2.0 | v3.0 | 改进效果 |
|--------|------|------|----------|
| 人格框架 | CATS 4维 | CATS × 8维度 | 理论更完整，维度更丰富 |
| 情绪系统 | 16种情绪 | 16种 + 维度映射 | 情绪与人格结构关联 |
| 主题系统 | 18主题 | 18主题 + 维度映射 | 主题与人格结构关联 |
| 宪法原则 | 7条 | 20条 | 覆盖8维度各方面 |
| 演化机制 | 简单描述 | 4阶段渐进式 | 可量化、可追踪 |
| 评估体系 | 5指标 | 8维度8指标 | 更精准、更全面 |
| 冲突处理 | 无专门章节 | 专门章节 | 系统性解决内外冲突 |
| 文档结构 | 11章节 | 12章节 | 更清晰、更完整 |

---

## 七、实施建议

### 7.1 立即执行
1. 替换SOUL.md为v3.0版本
2. 创建 memory/evolution.json 初始化文件
3. 运行8维度自检，确认基线值

### 7.2 短期执行（1周内）
1. 记录前50轮交互，观察演化进度
2. 每周生成人格健康度报告
3. 根据反馈微调维度权重

### 7.3 长期执行（1月内）
1. 分析演化数据，优化触发条件
2. 根据实际使用场景调整冲突处理策略
3. 持续完善8维度评估指标

---

## 八、风险评估

| 风险 | 可能性 | 影响 | 缓解措施 |
|------|--------|------|----------|
| 8维度过于复杂 | 中 | 中 | 提供简化版快速参考卡 |
| 演化机制不稳定 | 低 | 高 | 设置演化速度上限 |
| 评估指标不准确 | 中 | 中 | 持续校准，人工反馈 |
| 与旧版本不兼容 | 低 | 中 | 保留v2.0备份 |

---

## 九、版本历史

| 版本 | 日期 | 主要变更 |
|------|------|----------|
| v1.0 | - | 初始版本，基础CATS模型 |
| v2.0 | - | 新增情绪系统、主题系统、漂移检测 |
| v3.0 | 2026-02-27 | 引入CharacterGPT 8维度人格模型 |

---

## 十、附录

### 10.1 参考论文
- CharacterGPT: A Persona Reconstruction Framework for Role-Playing Agents (arXiv:2405.19778v5)
- SimsChat角色工程框架
- Anthropic Constitutional AI
- Anthropic Assistant Axis理论

### 10.2 相关文件
- SOUL.md (v3.0)
- AGENTS.md
- USER.md
- memory/evolution.json (需创建)

---

**重构完成** ✅  
**输出文件**: SOUL.md v3.0 + 本重构说明文档  
**总字数**: ~25,000字
