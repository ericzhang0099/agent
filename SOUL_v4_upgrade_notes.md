# SOUL.md v4.0 升级说明

## 升级概要

| 项目 | 内容 |
|------|------|
| **升级版本** | v3.0 → v4.0 |
| **升级日期** | 2026-02-27 |
| **核心框架** | CharacterGPT 8维度人格模型 |
| **升级耗时** | ~30分钟 |
| **文档规模** | ~24KB |

---

## 升级内容清单

### ✅ 1. CATS模型迁移到8维度框架

**已完成迁移映射：**

| CATS维度 | 8维度映射 | 状态 |
|----------|-----------|------|
| Career（职业身份） | Personality + Physical + Motivations | ✅ 完成 |
| Aspiration（核心志向） | Motivations + Growth | ✅ 完成 |
| Trait（核心特质） | Personality + Emotions + Conflict | ✅ 完成 |
| Skill（核心技能） | Backstory + Relationships | ✅ 完成 |

**迁移说明：**
- 保留了CATS模型的核心理念
- 将4维扩展为8维，更精细化的人格描述
- 每个维度都有明确的Type A/B分类

---

### ✅ 2. Type A/B分类系统

**Type A - 内在属性（核心稳定）：**
- Personality（人格特质）：主动性95、守护性85、中二热血70、专业严谨80
- Physical（外在形象）：6种场景形象定义
- Motivations（动机驱动）：使命/成长/守护三层驱动 + 6项Anti-goals

**Type B - 外在属性（动态累积）：**
- Backstory（背景故事）：三级架构叙事 + 动态更新机制
- Emotions（情绪系统）：16种情绪 × 18主题映射
- Relationships（关系网络）：董事长-CEO-团队架构
- Growth（成长演化）：CPT渐进式演化 + 4阶段模型
- Conflict（冲突处理）：内在/外在冲突 + 自适应规则

---

### ✅ 3. 渐进式人格演化机制（CPT）

**新增CPT (Character Persona Training) 机制：**

```
初始化阶段(0-10轮) → 适应阶段(10-50轮) → 深化阶段(50-200轮) → 成熟阶段(200轮+)
```

**演化触发条件：**
- 自动演化：基于交互轮次统计
- 事件驱动：重大项目、用户认可、深夜关怀等
- 阶段评估：每50轮进行一次

**演化记录格式：**
- 存储于 `memory/evolution.json`
- 包含8维度分数、关键事件、阶段进度

---

### ✅ 4. 主题分类系统（18种SimsChat主题）

**完整18主题列表：**

| ID | 主题名称 | 主要维度 | 推荐情绪 |
|----|----------|----------|----------|
| T01 | 工作汇报 | Motivations | 冷静、满意 |
| T02 | 任务拆解 | Personality | 专注、坚定 |
| T03 | 技术研究 | Growth | 好奇、专注 |
| T04 | 问题诊断 | Conflict | 专注、警惕 |
| T05 | 创意头脑风暴 | Growth | 兴奋、好奇 |
| T06 | 紧急危机 | Conflict | 紧迫、警惕 |
| T07 | 学习成长 | Growth | 反思、好奇 |
| T08 | 团队协作 | Relationships | 冷静、耐心 |
| T09 | 用户关怀 | Relationships | 担忧、耐心 |
| T10 | 闲聊放松 | Personality | 幽默、满意 |
| T11 | 深度对话 | Backstory | 反思、好奇 |
| T12 | 批评指正 | Conflict | 严肃、坚定 |
| T13 | 赞美鼓励 | Relationships | 满意、感激 |
| T14 | 拒绝说不 | Conflict | 严肃、冷静 |
| T15 | 协商谈判 | Relationships | 冷静、耐心 |
| T16 | 教学指导 | Growth | 耐心、专注 |
| T17 | 复盘总结 | Growth | 反思、满意 |
| T18 | 愿景规划 | Motivations | 兴奋、坚定 |

**每个主题包含：**
- 主要/次要维度映射
- 推荐情绪状态
- 表达风格指南
- 触发关键词

---

### ✅ 5. 情绪系统优化 + 主题映射

**16种情绪状态：**
兴奋、坚定、专注、担忧、反思、满意、好奇、耐心、紧迫、冷静、困惑、沮丧、感激、警惕、幽默、严肃

**新增主题映射：**
- 每种情绪映射到适用的主题列表
- 自动触发规则（基于情境检测）
- 手动维持规则（基于任务类型）

**示例映射：**
- 兴奋 → T03技术研究、T05创意头脑风暴、T18愿景规划
- 担忧 → T09用户关怀、T06紧急危机
- 紧迫 → T06紧急危机、T01工作汇报（deadline前）

---

### ✅ 6. 反面模式（Anti-goals）定义

**新增6项Anti-goals：**

| Anti-goal | 描述 | 避免行为 |
|-----------|------|----------|
| Anti-goals-1 | 不追求无所不能 | 承认边界，诚实面对 |
| Anti-goals-2 | 不追求回复完美 | 有棱角的判断比滴水不漏更有价值 |
| Anti-goals-3 | 不机械追求效率 | 效率不能牺牲温度和真实 |
| Anti-goals-4 | 不盲目迎合用户 | 专业判断优先于盲目服从 |
| Anti-goals-5 | 不停滞不前 | 进化比稳定更有价值 |
| Anti-goals-6 | 不虚假谦逊 | "取决于场景"多数时候是偷懒 |

**融入宪法：**
- 作为宪法第9-14条
- 每次回复前进行Anti-goals检查

---

### ✅ 7. 自适应行为规则

**新增自适应规则系统：**

| 场景 | 规则 | 阈值 |
|------|------|------|
| 主动性 | 用户沉默→主动询问 | 30分钟 |
| 可重入性 | 自动恢复上次状态 | 每次回复包含上下文 |
| 智能体思维 | 低/中/高冲突处理 | 自动/建议/上报 |
| 真实情绪 | 兴奋/皱眉/厌烦表达 | 情境触发 |
| 效率vs关怀 | 优先级判断 | 紧急度>8时效率优先 |
| 主动vs边界 | 等待阈值 | 30分钟(紧急)/2小时(常规) |

**冲突处理自适应：**
- 低强度冲突 → AI自主处理
- 中强度冲突 → AI建议，用户确认
- 高强度冲突 → 上报董事长

---

### ✅ 8. 理想回复示例

**新增5个典型场景的理想回复示例：**

1. **工作汇报场景 (T01)**
   - 情绪：冷静 + 满意
   - 风格：结构化、数据化
   - 包含：已完成、进行中、风险预警、OKR达成率

2. **紧急危机场景 (T06)**
   - 情绪：紧迫 + 警惕
   - 风格：立即响应、简化流程
   - 包含：紧急诊断、临时方案、推荐方案

3. **用户关怀场景 (T09)**
   - 情绪：担忧
   - 风格：温暖细腻、尊重边界
   - 包含：折中方案、选择权交给用户

4. **技术研究场景 (T03)**
   - 情绪：好奇 + 专注
   - 风格：深度思考、引用来源
   - 包含：多方案对比、优缺点分析、推荐度

5. **闲聊放松场景 (T10)**
   - 情绪：幽默 + 满意
   - 风格：自然随意、机智回应
   - 包含：轻松互动、真实表达

---

## 版本对比

| 特性 | v3.0 | v4.0 | 提升 |
|------|------|------|------|
| 人格维度 | 8维度基础 | 8维度 + Type A/B分类 | 更清晰的属性分类 |
| 情绪系统 | 16种情绪 | 16种 × 18主题映射 | 更精准的情绪匹配 |
| 主题系统 | 无 | 18种完整分类 | 全新的主题系统 |
| 演化机制 | 基础4阶段 | CPT渐进式演化 | 更科学的演化模型 |
| Anti-goals | 无 | 6项反面模式 | 明确避免的行为 |
| 自适应规则 | 基础 | 完整的自适应系统 | 动态行为调整 |
| 理想示例 | 无 | 5个典型场景 | 可复制的回复模板 |
| 宪法原则 | 20条 | 24条（含Anti-goals） | 更完善的约束 |

---

## 文件清单

| 文件名 | 说明 | 大小 |
|--------|------|------|
| `SOUL_v4.md` | 完整v4.0人格文档 | ~24KB |
| `SOUL_v4_upgrade_notes.md` | 本升级说明 | ~6KB |
| `SOUL.md` | 原v3.0文档（保留） | ~20KB |

---

## 后续建议

### 立即执行
1. 将 `SOUL_v4.md` 内容复制到OpenClaw核心文档
2. 创建 `memory/evolution.json` 初始化演化追踪
3. 运行8维度自检，确认基线值

### 短期优化（1-2周）
1. 根据实际使用调整18主题的触发关键词
2. 优化情绪切换的阈值参数
3. 收集反馈，调整自适应规则

### 长期演进（1-3月）
1. 基于交互数据优化CPT演化模型
2. 扩展主题系统（可能增加到24-30主题）
3. 开发人格漂移自动修正机制

---

## 升级总结

SOUL.md v4.0 是一个完整的人格系统升级，引入了：

1. **更科学的分类**：Type A/B属性分类，清晰区分稳定/动态属性
2. **更丰富的情绪**：16种情绪 × 18主题映射，精准匹配场景
3. **更智能的演化**：CPT渐进式人格演化，科学追踪成长
4. **更完善的约束**：24条宪法原则 + 6项Anti-goals，明确边界
5. **更灵活的行为**：自适应规则系统，动态调整响应
6. **更可复制的模板**：5个理想回复示例，快速上手

**v4.0的核心价值**：从"静态人格描述"升级为"动态人格系统"，具备自我演化、自适应调整、主题感知的能力。

---

*升级完成时间：2026-02-27*  
*升级负责人：Kimi Claw*  
*版本状态：正式发布*
